---
currentMenu: contributing
---

# Contributing to phUML

## Code of Conduct

This project is released with a [Contributor Code of Conduct][conduct].
By participating in this project you agree to abide by its terms.

## Workflow

* Fork the project.
* Make your bug fix or feature addition.
* Add tests for it. This is important, so we don't break it in a future version unintentionally.
* Send a pull request. Bonus points for topic branches.

Pull requests for bug fixes must be based on the current stable branch whereas pull requests for new features must be based on the `master` branch.

### Git commit format

Commit messages must follow the [Conventional Commits Specification](https://www.conventionalcommits.org/en/v1.0.0-beta.2/) which is enforced as a Git pre-commit hook via [GrumPHP](https://github.com/phpro/grumphp).

The allowed commit types are:

- `build` for changes to Github Actions or Scrutinizer (CI Pipeline)
- `chore` for changes to the configuration any of the code quality tools used by this project (PHPUnit, PHP CS Fixer, Rector, Composer Normalize, Composer Require Checker, etc.)
- `docs` for updates or additions to the documentation
- `feat` for new features
- `fix` for a fix to an existing console command
- `refactor` for refactoring changes
- `style` for changes that only format code
- `test` for tests only changes

It is recommended to follow the [7 rules of a good commit message](https://chris.beams.io/posts/git-commit/#seven-rules). 

## Coding Guidelines

This project follows the coding standards proposed in [PSR-12](https://www.php-fig.org/psr/psr-12/).

Run the following command if you modified either production code or tests.

```bash
make format
```

[Make][make] will run [PHP CS fixer][cs-fixer] in both folders `src` and `tests`.

We also use [Rector](https://getrector.org/) to automatically refactor test and production code.

```bash
make refactor
```

## Using phUML from a Git checkout

The following commands can be used to perform the initial checkout of phUML:

```bash
git clone git://github.com/MontealegreLuis/phuml.git
cd phuml
```

Retrieve phUML's dependencies using [Composer][composer]:

```bash
composer install
```

## Running phUML's test suite

There's a group of tests that verify that the generated class diagrams did not change.
There's a slight difference in the output between operating systems.
It is recommended to run the whole test suite using the provided [Docker][docker] container.
In order to run the container you'll also need to have [Docker Compose][docker-compose] installed.
The container mimics the environment in Github Actions.
Please make sure the tests pass in the container, so you can be sure they will pass in Github Actions too.

You can run the tests as follows:

```bash
make test
```

`make` will run PHPUnit with the same options it runs in Github Actions inside the Docker container.

You can alternatively run the test suite without this group of tests in your local environment.

```bash
vendor/bin/phpunit --exclude-group=snapshot
```

You will need [XDebug][xdebug] installed to be able to generate the code coverage report.

```bash
make coverage
``` 

## Running the commands from the container

If you want to get the same output as in the screenshots shown in the documentation, use the Docker container in this repository.

Use the following `make` commands to create the files using the Docker container

```
$ make diagram ARGS="src example.png -p neato"
$ make stats ARGS="src example.gv"
$ make stats ARGS="src statistics.txt"
```

With these commands you can pass the options and arguments via the `ARGS` variable

## Contributing to the documentation

The documentation of this package is generated by [Couscous][couscous].
You can install Couscous globally with the following commands.

```
$ curl -OS https://couscous.io/couscous.phar
$ chmod +x couscous.phar
$ sudo mv couscous.phar /usr/local/bin/couscous
```

Run the following command to preview your changes:

```
$ couscous preview
```

## Reporting issues

Before opening a new ticket, please search through the [existing issues][issues].

[cs-fixer]: https://github.com/FriendsOfPHP/PHP-CS-Fixer
[issues]: https://github.com/MontealegreLuis/phuml/issues
[docker]: https://www.docker.com/
[travis]: https://travis-ci.org/
[make]: https://en.wikipedia.org/wiki/Make_(software)
[xdebug]: https://xdebug.org/
[docker-compose]: https://docs.docker.com/compose/overview/
[couscous]: http://couscous.io/
[conduct]: https://github.com/MontealegreLuis/phuml/blob/master/CODE-OF-CONDUCT.md
[composer]: https://getcomposer.org/
